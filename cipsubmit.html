<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Sutton OpenBook ¬∑ Capital Project Submission</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Submit a capital project request to the Town of Sutton." />
  <link rel="icon" href="/favicon.ico" />
  <style>
    /* ====== Design Tokens (light, modern, minimal) ====== */
    :root{
      --accent:#0D9488;       /* subtle teal accent */
      --ink:#0f172a;          /* slate-900 */
      --muted:#6b7280;        /* gray-500 */
      --bg:#f8fafc;           /* slate-50 */
      --card:#ffffff;
      --border:#e5e7eb;       /* gray-200 */
      --shadow:0 1px 3px rgba(0,0,0,.06), 0 10px 30px rgba(0,0,0,.04);
      --radius:14px;
      --pad:24px;
      --maxw:980px;           /* a little narrower for focus */
    }
    @media (prefers-color-scheme: dark){
      :root{
        --bg:#0b1020; --card:#111827; --ink:#e5e7eb; --border:#1f2937; --muted:#9ca3af;
        --shadow:0 1px 3px rgba(0,0,0,.5), 0 10px 30px rgba(0,0,0,.3);
      }
    }

    /* ====== Base ====== */
    *{box-sizing:border-box}
    body{
      margin:0; font:16px/1.6 system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;
      color:var(--ink); background:var(--bg);
    }
    a{color:var(--accent); text-decoration:underline}
    a:hover{opacity:.85}
    .wrap{max-width:var(--maxw); margin:0 auto; padding:28px 16px 56px}

    /* ====== Header (very light) ====== */
    .hero{
      background: linear-gradient(180deg, rgba(13,148,136,.06), rgba(13,148,136,0) 60%);
      border-bottom:1px solid var(--border);
    }
    .hero .wrap{padding-top:34px; padding-bottom:22px}
    .title{margin:0; font-size:28px; letter-spacing:.2px}
    .subtitle{margin:6px 0 0; color:var(--muted)}

    /* ====== Cards ====== */
    .card{
      background:var(--card); border:1px solid var(--border); border-radius:var(--radius);
      box-shadow:var(--shadow); overflow:hidden;
    }
    .card .body{padding:var(--pad)}
    .card h2{margin:0 0 10px; font-size:18px}

    /* ====== Simple vertical flow ====== */
    .stack{display:flex; flex-direction:column; gap:18px; margin-top:22px}

    /* ====== Iframe Container ====== */
    .frameTop{
      display:flex; align-items:center; justify-content:space-between; gap:8px;
      padding:14px var(--pad); border-bottom:1px solid var(--border); background:linear-gradient(0deg, rgba(13,148,136,.05), transparent);
    }
    .frameTop b{font-size:14px}
    .frame{
      display:block; width:100%; border:0; height:1700px; /* adjust if needed */
      background:#fff;
    }

    /* ====== Footer ====== */
    footer{margin-top:28px; color:var(--muted); font-size:14px; text-align:center}

    /* small niceties */
    .meta{display:flex; flex-wrap:wrap; gap:8px; margin-top:8px; color:var(--muted); font-size:14px}
    .badge{display:inline-flex; align-items:center; gap:8px; padding:6px 10px; border:1px solid var(--border); border-radius:999px; background:#fff}
  </style>
</head>
<body>

  <!-- Header -->
  <header class="hero">
    <div class="wrap">
      <h1 class="title">Capital Project Submission</h1>
      <p class="subtitle">Submit requests using the Town‚Äôs Project Detail format. A PDF will be emailed to you and the Town Manager.</p>
      <div class="meta" aria-hidden="true">
        <span class="badge">‚è±Ô∏è 10‚Äì15 minutes</span>
        <span class="badge">üìé Quote required if requesting FY27 funds</span>
        <span class="badge">üñºÔ∏è PNG/JPG image ‚Ä¢ üìÑ PDF quote</span>
      </div>
    </div>
  </header>

  <main class="wrap">
    <div class="stack">
      <!-- Guidance first -->
      <aside class="card">
        <div class="body">
          <h2>Before you start</h2>
          <ul style="margin:8px 0 0 18px;">
            <li>Have your <b>project title</b>, <b>department</b>, and <b>category</b> ready.</li>
            <li>Be prepared to describe the <b>need/justification</b>.</li>
            <li>If requesting funds in <b>FY 2027</b>, a <b>quote document</b> is required.</li>
            <li>Optional: upload a <b>project photo</b> (PNG/JPG).</li>
          </ul>
        </div>
      </aside>

      <!-- Form embed -->
      <article class="card">
        <div class="frameTop">
          <b>Submit your project</b>
          <a class="open-link" id="openInNew" href="#" target="_blank" rel="noopener">Open in a new tab ‚Üó</a>
        </div>
        <iframe
          id="cipFrame"
          class="frame"
          src="https://script.google.com/macros/s/AKfycbzjdNbId9-_jNbSzvp3ziJ9QZJzK9LE8_P_Jr4DYHh1SJuIhWnXCW96_LdwlQLhz_ULpg/exec"
          loading="lazy"
          referrerpolicy="no-referrer-when-downgrade"
          title="Sutton CIP ‚Äì Capital Project Submission"
        ></iframe>
      </article>
    </div>

    <footer>
      <p>¬© Town of Sutton ‚Äî OpenBook</p>
    </footer>
  </main>

  <script>
    // ‚ÄúOpen in new tab‚Äù mirrors the iframe source
    const frame = document.getElementById('cipFrame');
    const openInNew = document.getElementById('openInNew');
    openInNew.href = frame.src;

    // Optional: responsive height (fixed is simplest cross-origin)
    const BASE = 1500, MIN = 1200, MAX = 2200;
    function resizeIframe(){
      const h = Math.max(MIN, Math.min(MAX, Math.round(window.innerHeight * 1.15)));
      frame.style.height = (h < BASE ? BASE : h) + 'px';
    }
    resizeIframe();
    window.addEventListener('resize', resizeIframe);
  </script>
</body>
</html>
